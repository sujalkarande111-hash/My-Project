<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Architect Beta</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@300;400;500&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'DM Mono', monospace; background-color: #050505; background-image: radial-gradient(circle at 50% 0%, #1a1a1a, #050505); color: #f8fafc; overflow-x: hidden; }
        h1, h2, h3, button, .tag-btn { font-family: 'Space Mono', monospace; }
        
        /* Minimal Glass Morphism Theme */
        .glass-panel {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1), inset 0 0 0 1px rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 24px !important;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .glass-panel:hover {
            border-color: rgba(232, 30, 41, 0.4);
            box-shadow: 0 8px 40px rgba(0, 0, 0, 0.2);
            transform: translateY(-2px);
        }

        .input-field {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.08);
            color: #fff;
            transition: all 0.2s ease;
            border-radius: 16px !important;
            font-size: 0.85rem;
            font-family: 'DM Mono', monospace;
        }
        .input-field:focus {
            background: rgba(0, 0, 0, 0.6);
            border-color: rgba(232, 30, 41, 0.6);
            box-shadow: 0 0 0 4px rgba(232, 30, 41, 0.15);
            outline: none;
        }

        .tag-btn {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            color: #94a3b8;
            border-radius: 12px !important;
            font-size: 0.75rem;
            font-weight: 500;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            transition: all 0.2s ease;
        }
        .tag-btn:hover {
            border-color: #e81e29;
            color: #fff;
            background: rgba(232, 30, 41, 0.15);
            box-shadow: 0 4px 12px rgba(232, 30, 41, 0.2);
            transform: translateY(-1px);
        }
        .tag-btn.active {
            background: rgba(232, 30, 41, 0.2);
            color: #fff;
            border-color: #e81e29;
            box-shadow: 0 0 15px rgba(232, 30, 41, 0.2);
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }

        /* Custom range slider */
        input[type=range] { -webkit-appearance: none; background: transparent; }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 4px; background: rgba(255,255,255,0.1); border-radius: 4px; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%; background: #e81e29; border: 2px solid #000; margin-top: -6px; cursor: pointer; transition: all 0.2s; box-shadow: 0 0 10px rgba(232, 30, 41, 0.5); }
        input[type=range]::-webkit-slider-thumb:hover { transform: scale(1.2); }
        
        /* Blobs */
        .blob { position: fixed; filter: blur(80px); z-index: -1; opacity: 0.4; animation: float 10s infinite ease-in-out alternate; pointer-events: none; }
        @keyframes float { 0% { transform: translate(0, 0); } 100% { transform: translate(20px, -20px); } }
        
        /* Simple transition for toast */
        #toast { transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1); border-radius: 99px !important; background: rgba(20, 20, 20, 0.9); border: 1px solid rgba(232, 30, 41, 0.5); backdrop-filter: blur(16px); color: white; box-shadow: 0 10px 40px -10px rgba(0,0,0,0.5); }

        /* Micro-interactions */
        button:active, .tag-btn:active { transform: scale(0.96) translateY(0) !important; }
        
        @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
        .btn-shimmer {
            background: linear-gradient(110deg, #e81e29 20%, #ff4d58 40%, #e81e29 60%);
            background-size: 200% 100%;
            animation: shimmer 3s infinite linear;
            border: none;
            border-radius: 16px !important;
            box-shadow: 0 0 20px rgba(232, 30, 41, 0.4);
            transition: all 0.3s ease;
        }
        .btn-shimmer:hover { box-shadow: 0 0 30px rgba(232, 30, 41, 0.6); transform: translateY(-2px); }

        /* Neon & Micro-interactions */
        h1 { text-shadow: 0 0 30px rgba(232, 30, 41, 0.3); }
        
        /* Active Ratio Buttons & Mode Switchers (Tailwind classes hook) */
        .ratio-btn.bg-\[\#e81e29\], button.bg-\[\#e81e29\] {
            box-shadow: 0 0 15px rgba(232, 30, 41, 0.4);
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }

        /* Animations */
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); filter: blur(5px); } to { opacity: 1; transform: translateY(0); filter: blur(0); } }
        .animate-fade-in-up { animation: fadeInUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        
        .hidden { display: none; }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.2); }
    </style>
</head>
<body class="min-h-screen p-4 md:p-8 bg-[#050505]">
    
    <!-- Background Blobs -->
    <div class="blob bg-[#e81e29] w-96 h-96 rounded-full top-0 left-0 -translate-x-1/2 -translate-y-1/2 opacity-20"></div>
    <div class="blob bg-blue-900 w-[30rem] h-[30rem] rounded-full bottom-0 right-0 translate-x-1/3 translate-y-1/3 opacity-20" style="animation-delay: -2s;"></div>

    <!-- Landing Page -->
    <div id="landing-page" class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-[#050505] text-center p-6 transition-all duration-700 ease-in-out">
        <div class="absolute inset-0 overflow-hidden pointer-events-none">
            <div class="blob bg-[#e81e29] w-[500px] h-[500px] rounded-full top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-10 blur-[120px]"></div>
        </div>
        
        <div class="relative z-10 space-y-8 max-w-3xl">
            <div class="space-y-4">
                <h1 class="text-6xl md:text-8xl font-bold text-white tracking-tighter animate-fade-in-up drop-shadow-2xl">
                    The Prompt <span class="text-transparent bg-clip-text bg-gradient-to-r from-[#e81e29] to-red-400">Architect</span>
                </h1>
                <p class="text-slate-400 text-lg md:text-xl font-light tracking-wide animate-fade-in-up max-w-xl mx-auto leading-relaxed" style="animation-delay: 0.2s;">
                    Craft professional-grade AI prompts for Nano Banana, Midjourney & Stable Diffusion with a designer-first interface made by a fellow Brand Designer & Prompt Engineer syuj.ai_
                </p>
            </div>

            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center animate-fade-in-up" style="animation-delay: 0.4s;">
                <button onclick="enterApp()" class="group relative px-10 py-4 bg-white text-black font-bold rounded-full overflow-hidden transition-all hover:scale-105 hover:shadow-[0_0_40px_rgba(255,255,255,0.3)]">
                    <span class="relative z-10 flex items-center gap-3 text-lg tracking-tight">
                        Enter Studio <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                    </span>
                </button>
            </div>
            
            <div class="pt-16 border-t border-white/5 animate-fade-in-up opacity-60" style="animation-delay: 0.6s;">
                <div class="text-center">
                    <p class="text-xl font-bold text-white mb-1">1.6 Beta</p>
                </div>
            </div>
        </div>
    </div>

    <div id="app-container" class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6 hidden opacity-0 transition-opacity duration-1000">
        
        <!-- Header -->
        <div class="lg:col-span-3 mb-6">
            <h1 class="text-4xl md:text-5xl font-light text-white mb-2 tracking-tight">Prompt Architect Beta</h1>
            <p class="text-slate-500 font-light">Prompt Generator For Designers By syuj.ai_.</p>
            
            <!-- Mode Switcher -->
            <div class="mt-6 flex justify-center">
                <div class="glass-panel p-1 inline-flex relative">
                    <button onclick="switchMode('mockup')" id="mode-mockup" class="relative z-10 px-8 py-3 text-sm font-bold text-slate-400 hover:text-white transition-all rounded-full">Mockup Generator</button>
                    <button onclick="switchMode('product')" id="mode-product" class="relative z-10 px-8 py-3 text-sm font-bold text-slate-400 hover:text-white transition-all rounded-full">Product Shoot</button>
                </div>
            </div>
        </div>

        <!-- Left Column: Controls -->
        <!-- Mockup Controls -->
        <div id="mockupControls" class="lg:col-span-2 space-y-6 animate-fade-in-up">
            <!-- Mockup Subject -->
            <div class="glass-panel p-6 rounded-2xl shadow-lg">
                <label class="block text-white/60 text-xs font-bold mb-2 uppercase tracking-widest">Design / Content on Mockup</label>
                <textarea id="mockupContent" rows="2" class="input-field w-full rounded-xl p-4 text-lg text-white placeholder-slate-500" placeholder="e.g., A minimalist logo of a fox, typography saying 'FUTURE'"></textarea>
            </div>

            <!-- Category & Item -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="glass-panel p-6 rounded-2xl">
                    <label class="block text-white/60 text-xs font-bold mb-3 uppercase tracking-widest">Mockup Category</label>
                    <select id="mockupCategorySelect" class="input-field w-full rounded-lg p-3 text-white" onchange="filterMockupItems()">
                        <!-- JS populate -->
                    </select>
                </div>
                <div class="glass-panel p-6 rounded-2xl">
                    <label class="block text-white/60 text-xs font-bold mb-3 uppercase tracking-widest">Target Item</label>
                    <select id="mockupItemSelect" class="input-field w-full rounded-lg p-3 text-white"></select>
                </div>
            </div>

            <!-- Environment & Lighting -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="glass-panel p-6 rounded-2xl">
                    <label class="block text-white/60 text-xs font-bold mb-3 uppercase tracking-widest">Environment</label>
                    <select id="mockupEnvSelect" class="input-field w-full rounded-lg p-3 text-white"></select>
                </div>
                <div class="glass-panel p-6 rounded-2xl">
                    <label class="block text-white/60 text-xs font-bold mb-3 uppercase tracking-widest">Lighting Setup</label>
                    <select id="mockupLightingSelect" class="input-field w-full rounded-lg p-3 text-white"></select>
                </div>
            </div>
        </div>

        <!-- Product Photography Controls (Hidden by default) -->
        <div id="productControls" class="lg:col-span-2 space-y-6 hidden">
            <!-- Product Input -->
            <div class="glass-panel p-6 rounded-2xl shadow-lg">
                <label class="block text-white/60 text-xs font-bold mb-2 uppercase tracking-widest">Product Description</label>
                <textarea id="productInput" rows="2" class="input-field w-full rounded-xl p-4 text-lg text-white placeholder-slate-500" placeholder="e.g., A luxury perfume bottle with gold accents..."></textarea>
                
                <!-- Visual Placeholder for Image Upload -->
                <div class="mt-4 p-4 border border-dashed border-white/20 rounded-xl bg-white/5 text-center cursor-pointer hover:bg-white/10 transition-colors relative group">
                    <input type="file" id="productImageUpload" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" onchange="handleImageUpload(this)">
                    <div id="uploadPlaceholder">
                        <p class="text-sm text-white/60 font-bold">ðŸ“¸ Upload Reference Product Image</p>
                        <p class="text-xs text-white/40 mt-1">AI will use this as the source (Image-to-Image)</p>
                    </div>
                    <img id="imagePreview" class="hidden max-h-32 mx-auto rounded-lg shadow-lg" />
                </div>
                
                <div class="mt-4 flex items-center gap-4">
                    <label class="text-xs text-white/40 font-bold uppercase tracking-widest">Image Fidelity (IW)</label>
                    <input id="prodWeightSlider" type="range" min="0.5" max="3" step="0.1" value="2" class="flex-1 h-1 bg-slate-800 rounded-lg appearance-none cursor-pointer">
                    <span id="prodWeightValue" class="font-mono text-xs text-white/60">2.0</span>
                </div>
            </div>

            <!-- Context & Lighting -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="glass-panel p-6 rounded-2xl">
                    <label class="block text-white/60 text-xs font-bold mb-3 uppercase tracking-widest">Placement / Context</label>
                    <select id="prodContextSelect" class="input-field w-full rounded-lg p-3 text-white"></select>
                </div>
                <div class="glass-panel p-6 rounded-2xl">
                    <label class="block text-white/60 text-xs font-bold mb-3 uppercase tracking-widest">Studio Lighting</label>
                    <select id="prodLightingSelect" class="input-field w-full rounded-lg p-3 text-white"></select>
                </div>
            </div>

            <!-- Camera & Material -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="glass-panel p-6 rounded-2xl">
                    <label class="block text-white/60 text-xs font-bold mb-3 uppercase tracking-widest">Camera Angle</label>
                    <select id="prodAngleSelect" class="input-field w-full rounded-lg p-3 text-white"></select>
                </div>
                <div class="glass-panel p-6 rounded-2xl">
                    <label class="block text-white/60 text-xs font-bold mb-3 uppercase tracking-widest">Background Material</label>
                    <select id="prodMaterialSelect" class="input-field w-full rounded-lg p-3 text-white"></select>
                </div>
            </div>
        </div>

        <!-- Right Column: Output & Settings -->
        <div class="lg:col-span-1 space-y-6">
            
            <!-- Output Card -->
            <div class="glass-panel p-6 rounded-2xl" style="background: rgba(10, 10, 10, 0.8);">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-medium text-white">Generated Prompt</h2>
                    <span class="text-xs bg-white/10 text-white/60 px-2 py-1 rounded" id="tokenCount">0 chars</span>
                </div>
                
                <div class="relative group">
                    <textarea id="finalPrompt" readonly class="w-full h-48 bg-black/30 border border-white/10 rounded-xl p-4 text-slate-200 text-sm leading-relaxed resize-none focus:border-white/30 transition-colors"></textarea>
                </div>

                <div class="mt-4 grid grid-cols-2 gap-3">
                    <button onclick="copyToClipboard()" id="copyBtn" class="glass-panel hover:bg-white/10 border border-white/10 text-white font-medium py-3 px-4 rounded-xl transition-all hover:scale-[1.02] active:scale-95">Copy</button>
                    <button onclick="randomize()" id="randBtn" class="glass-panel hover:bg-white/10 border border-white/10 text-white font-medium py-3 px-4 rounded-xl transition-all hover:scale-[1.02] active:scale-95">Random</button>
                </div>
                <div class="mt-4">
                    <button onclick="clearAll()" class="w-full bg-transparent hover:bg-red-500/10 border border-white/10 hover:border-red-500/30 text-white/60 hover:text-red-400 font-medium py-3 px-4 rounded-xl transition-all hover:scale-[1.01]">
                        Clear All
                    </button>
                </div>
                
                <div class="mt-4">
                    <label class="block text-white/40 text-xs font-bold mb-2 uppercase tracking-widest">Aspect Ratio</label>
                    <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2">
                        <button class="ratio-btn bg-[#e81e29] text-white border border-[#e81e29] rounded-lg py-2 text-xs transition-colors" data-ratio="">Default</button>
                        <button class="ratio-btn bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg py-2 text-xs text-slate-300 transition-colors" data-ratio="--ar 1:1">1:1</button>
                        <button class="ratio-btn bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg py-2 text-xs text-slate-300 transition-colors" data-ratio="--ar 16:9">16:9</button>
                        <button class="ratio-btn bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg py-2 text-xs text-slate-300 transition-colors" data-ratio="--ar 9:16">9:16</button>
                        <button class="ratio-btn bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg py-2 text-xs text-slate-300 transition-colors" data-ratio="--ar 4:3">4:3</button>
                        <button class="ratio-btn bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg py-2 text-xs text-slate-300 transition-colors" data-ratio="--ar 3:4">3:4</button>
                        <button class="ratio-btn bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg py-2 text-xs text-slate-300 transition-colors" data-ratio="--ar 3:2">3:2</button>
                        <button class="ratio-btn bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg py-2 text-xs text-slate-300 transition-colors" data-ratio="--ar 2:3">2:3</button>
                        <button class="ratio-btn bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg py-2 text-xs text-slate-300 transition-colors" data-ratio="--ar 2:1">2:1</button>
                        <button class="ratio-btn bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg py-2 text-xs text-slate-300 transition-colors" data-ratio="--ar 1:2">1:2</button>
                        <button class="ratio-btn bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg py-2 text-xs text-slate-300 transition-colors" data-ratio="--ar 21:9">21:9</button>
                        <button class="ratio-btn bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg py-2 text-xs text-slate-300 transition-colors" data-ratio="--ar 9:21">9:21</button>
                        <button class="ratio-btn bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg py-2 text-xs text-slate-300 transition-colors" data-ratio="--ar 5:4">5:4</button>
                        <button class="ratio-btn bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg py-2 text-xs text-slate-300 transition-colors" data-ratio="--ar 4:5">4:5</button>
                    </div>
                </div>
            </div>

            <div class="mt-6 pt-6 border-t border-white/10">
                <label class="block text-white/40 text-xs font-bold mb-2 uppercase tracking-widest">Negative Prompt</label>
                <textarea id="negativePrompt" rows="2" class="input-field w-full rounded-lg p-3 text-xs text-slate-300" placeholder="ugly, blurry, low quality..."></textarea>
            </div>

        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed top-5 right-5 bg-white text-black font-medium py-3 px-6 rounded-full shadow-2xl transform translate-x-[120%]">
        Copied to clipboard!
    </div>

    <script>
        // Data
        const lighting = [
            "Cinematic Lighting", "Natural Light", "Golden Hour", "Blue Hour",
            "Studio Lighting", "Neon Lights", "Volumetric Lighting", "Bioluminescent",
            "Softbox", "Rim Lighting", "God Rays", "Dark & Moody"
        ];

        // Mockup Data
        const mockupCategories = {
            "All": [],
            "Packaging": ["Box Packaging", "Coffee Pouch", "Soda Can", "Cosmetic Bottle", "Shopping Bag", "Mailer Box", "Tube Packaging", "Food Container"],
            "Apparel": ["T-Shirt", "Hoodie", "Cap", "Tote Bag", "Jacket", "Shorts", "Tank Top", "Backpack"],
            "Stationery": ["Business Card", "Letterhead", "Envelope", "Notebook", "Greeting Card", "Folder", "Pen", "Planner"],
            "Digital": ["iPhone 15 Pro", "MacBook Pro", "iPad Pro", "iMac", "Android Phone", "Laptop Screen", "Smart Watch", "Tablet"],
            "Print": ["Poster Frame", "Canvas", "Magazine", "Hardcover Book", "Flyer", "Brochure", "Book Cover", "Newspaper"],
            "Signage": ["Billboard", "Bus Stop Ad", "Storefront Sign", "Neon Sign", "A-Frame Sign", "Wall Decal", "Window Sign", "Street Banner"],
            "Home": ["Coffee Mug", "Water Bottle", "Pillow", "Bedding Set", "Coaster", "Candle", "Vase", "Picture Frame"],
            "Cosmetics": ["Lipstick", "Mascara", "Compact Powder", "Eyeshadow Palette", "Nail Polish", "Cream Jar", "Lotion Bottle", "Perfume Bottle"]
        };
        // Flatten for "All"
        Object.values(mockupCategories).forEach(arr => mockupCategories["All"].push(...arr));
        mockupCategories["All"] = [...new Set(mockupCategories["All"])].sort();

        const mockupEnvironments = [
            "Plain Background", "Gradient Background", "Minimalist Studio", "Marble Surface", 
            "Wooden Desk", "Concrete Surface", "Terrazzo Podium", "Silk Fabric Background", 
        ];

        const colors = [ 
            "Vibrant", "Monochromatic", "Pastel", "Neon Palette", "Earthy Tones", 
            "Duotone", "Warm Colors", "Cool Colors", "Sepia", "Black and White",
            "Cyberpunk Neon", "Vaporwave", "Gold", "Silver", "Matte Black"
        ];

        // Product Photography Data
        const productContexts = [
            "Studio Solid Color Background", "Marble Podium", "Wooden Table", "Water Splash Surface", 
            "Floating in Air", "Neon Cyberpunk City Street", "Nature Forest Floor with Moss", "Beach Sand",
        ];

        const productLighting = [
            "Softbox Studio Lighting", "Hard Rim Light", "Natural Window Light", "God Rays",
            "Neon Blue/Pink Lighting", "Golden Hour Sun", "Dramatic Chiaroscuro", "Ring Light",
        ];

        const productAngles = [
            "Front Level View", "Top-Down (Flat Lay)", "Low Angle Hero Shot", "45-Degree Isometric",
            "Close-Up Macro", "Dutch Angle", "Profile Side View", "Worm's Eye View", "Bird's Eye View",
        ];

        const productMaterials = [
            "Matte Finish", "Glossy Reflection", "Brushed Metal", "Velvet Fabric", "Satin Cloth",
            "Rough Concrete", "Polished Marble", "Natural Wood", "Sand Texture", "Water Surface",
        ];
        
        // State
        let currentRatio = "";
        let currentMode = "mockup"; // 'mockup' or 'product'

        // Init
        function init() {
            // Sort all data arrays alphabetically
            lighting.sort();

            mockupEnvironments.sort();
            Object.values(mockupCategories).forEach(arr => arr.sort());

            productContexts.sort();
            productLighting.sort();
            productAngles.sort();
            productMaterials.sort();

            // Populate Mockup Dropdowns
            const populate = (id, arr) => {
                const sel = document.getElementById(id);
                if (!sel) return;
                sel.innerHTML = ''; // Clear existing
                const def = document.createElement('option');
                def.value = ""; def.textContent = "None";
                sel.appendChild(def);
                
                // Handle object keys if array is not array
                if (!Array.isArray(arr)) arr = Object.keys(arr);

                arr.forEach(item => {
                    const opt = document.createElement('option');
                    opt.value = item; opt.textContent = item;
                    sel.appendChild(opt);
                });
            };

            populate('mockupCategorySelect', Object.keys(mockupCategories).sort());
            document.getElementById('mockupCategorySelect').value = "All"; // Default
            populate('mockupItemSelect', mockupCategories["All"]);
            populate('mockupEnvSelect', mockupEnvironments);
            populate('mockupLightingSelect', lighting); // Reuse lighting

            // Product Populate
            populate('prodContextSelect', productContexts);
            populate('prodLightingSelect', productLighting);
            populate('prodAngleSelect', productAngles);
            populate('prodMaterialSelect', productMaterials);

            // Mockup Listeners
            ['mockupContent', 'mockupCategorySelect', 'mockupItemSelect', 'mockupEnvSelect', 'mockupLightingSelect'].forEach(id => {
                const el = document.getElementById(id);
                if(el) el.addEventListener(id.includes('Content') ? 'input' : 'change', generatePrompt);
            });

            // Product Listeners
            ['productInput', 'prodContextSelect', 'prodLightingSelect', 'prodAngleSelect', 'prodMaterialSelect'].forEach(id => {
                const el = document.getElementById(id);
                if(el) el.addEventListener(id.includes('Input') ? 'input' : 'change', generatePrompt);
            });

            // Ratio Buttons
            document.querySelectorAll('.ratio-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.ratio-btn').forEach(b => {
                        b.classList.remove('bg-[#e81e29]', 'text-white', 'border-[#e81e29]');
                        b.classList.add('bg-white/5', 'text-slate-300', 'border-white/10');
                    });
                    btn.classList.remove('bg-white/5', 'text-slate-300', 'border-white/10');
                    btn.classList.add('bg-[#e81e29]', 'text-white', 'border-[#e81e29]');
                    currentRatio = btn.dataset.ratio;
                    generatePrompt();
                });
            });
            // Set default active ratio button
            const defaultRatioBtn = document.querySelector('.ratio-btn[data-ratio=""]');
            if(defaultRatioBtn) {
                defaultRatioBtn.classList.add('bg-[#e81e29]', 'text-white', 'border-[#e81e29]');
                defaultRatioBtn.classList.remove('bg-white/5', 'text-slate-300', 'border-white/10');
            }

            // Listeners
            document.getElementById('negativePrompt').addEventListener('input', generatePrompt);
            
            const prodWeightSlider = document.getElementById('prodWeightSlider');
            prodWeightSlider.addEventListener('input', () => { document.getElementById('prodWeightValue').textContent = prodWeightSlider.value; generatePrompt(); });

            // Initial prompt generation
            switchMode('mockup');
        }

        function switchMode(mode) {
            currentMode = mode;
            const mockBtn = document.getElementById('mode-mockup');
            const prodBtn = document.getElementById('mode-product');
            const mockCtrls = document.getElementById('mockupControls');
            const prodCtrls = document.getElementById('productControls');

            // Reset all
            [mockBtn, prodBtn].forEach(b => b.className = "px-6 py-2 text-sm font-bold text-slate-400 hover:text-white transition-all rounded-full");
            [mockCtrls, prodCtrls].forEach(c => {
                c.classList.add('hidden');
                c.classList.remove('animate-fade-in-up');
            });

            // Activate selected
            if (mode === 'mockup') { 
                mockBtn.className = "px-6 py-2 text-sm font-bold bg-[#e81e29] text-white transition-all shadow-[0_0_15px_rgba(232,30,41,0.4)] rounded-full"; 
                mockCtrls.classList.remove('hidden');
                void mockCtrls.offsetWidth; // Trigger reflow
                mockCtrls.classList.add('animate-fade-in-up');
            }
            else if (mode === 'product') { 
                prodBtn.className = "px-6 py-2 text-sm font-bold bg-[#e81e29] text-white transition-all shadow-[0_0_15px_rgba(232,30,41,0.4)] rounded-full"; 
                prodCtrls.classList.remove('hidden');
                void prodCtrls.offsetWidth; // Trigger reflow
                prodCtrls.classList.add('animate-fade-in-up');
            }
            
            generatePrompt();
        }

        function handleImageUpload(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('imagePreview').src = e.target.result;
                    document.getElementById('imagePreview').classList.remove('hidden');
                    document.getElementById('uploadPlaceholder').classList.add('hidden');
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        function filterMockupItems() {
            const cat = document.getElementById('mockupCategorySelect').value || "All";
            const items = mockupCategories[cat];
            const sel = document.getElementById('mockupItemSelect');
            sel.innerHTML = '';
            const def = document.createElement('option');
            def.value = ""; def.textContent = "None";
            sel.appendChild(def);
            items.forEach(item => {
                const opt = document.createElement('option');
                opt.value = item; opt.textContent = item;
                sel.appendChild(opt);
            });
            generatePrompt();
        }

        function generateMockupPrompt() {
            const content = document.getElementById('mockupContent').value.trim();
            const item = document.getElementById('mockupItemSelect').value;
            const env = document.getElementById('mockupEnvSelect').value;
            const lighting = document.getElementById('mockupLightingSelect').value;
            
            let parts = [];
            
            // Core construction
            if (content) parts.push(`Design of ${content}`);
            if (item) parts.push(`applied on a ${item}`);
            else if (content) parts.push("on a mockup surface");
            
            // Scene
            if (env) parts.push(`set in ${env}`);
            
            // Atmosphere
            if (lighting) parts.push(lighting);
            
            // Tech specs for realism
            parts.push("Professional Product Photography, High Resolution, 8k, Sharp Focus, Photorealistic");

            let finalString = parts.join(', ');

            if (currentRatio) finalString += ` ${currentRatio}`;
            const negative = document.getElementById('negativePrompt').value.trim();
            if (negative) finalString += ` --no ${negative}`;
            
            const output = document.getElementById('finalPrompt');
            output.value = finalString;
            document.getElementById('tokenCount').textContent = `${finalString.length} chars`;
        }

        function enterApp() {
            const landing = document.getElementById('landing-page');
            const app = document.getElementById('app-container');
            
            landing.style.opacity = '0';
            landing.style.transform = 'scale(1.1)';
            landing.style.pointerEvents = 'none';
            
            setTimeout(() => {
                landing.classList.add('hidden');
                app.classList.remove('hidden');
                // Trigger reflow
                void app.offsetWidth;
                app.classList.remove('opacity-0');
            }, 500);
        }
    
        function generateProductPrompt() {
            const product = document.getElementById('productInput').value.trim();
            const context = document.getElementById('prodContextSelect').value;
            const lighting = document.getElementById('prodLightingSelect').value;
            const angle = document.getElementById('prodAngleSelect').value;
            const material = document.getElementById('prodMaterialSelect').value;
            const iw = document.getElementById('prodWeightSlider').value;

            let parts = [];
            
            if (product) parts.push(`Commercial Product Photography of ${product}`);
            else parts.push("Commercial Product Photography");

            if (context) parts.push(`placed on ${context}`);
            if (lighting) parts.push(lighting);
            if (angle) parts.push(angle);
            if (material) parts.push(`Background texture: ${material}`);

            parts.push("High Resolution, 8k, Sharp Focus, Professional Advertising Shot, Highly Detailed, Photorealistic, Unreal Engine 5 Render");
            
            let finalString = parts.join(', ');
            
            if (iw != 1) finalString += ` --iw ${iw}`;
            if (currentRatio) finalString += ` ${currentRatio}`;
            
            const negative = document.getElementById('negativePrompt').value.trim();
            if (negative) finalString += ` --no ${negative}`;
            
            document.getElementById('finalPrompt').value = finalString;
            document.getElementById('tokenCount').textContent = `${finalString.length} chars`;
        }
    
        function generatePrompt() {
            if (currentMode === 'mockup') {
                generateMockupPrompt();
                return;
            } else if (currentMode === 'product') {
                generateProductPrompt();
                return;
            }
        }

        function randomize() {            
            clearAll(false); // Clear all without regenerating prompt yet
            
            // Visual feedback
            const btn = document.getElementById('randBtn');
            const originalText = btn.textContent;
            btn.textContent = "ðŸŽ²";
            setTimeout(() => btn.textContent = originalText, 300);

            if (currentMode === 'mockup') {
                // Mockup Randomization
                const cats = Object.keys(mockupCategories).filter(c => c !== "All");
                const cat = cats[Math.floor(Math.random() * cats.length)];
                document.getElementById('mockupCategorySelect').value = cat;
                filterMockupItems();
                
                const items = mockupCategories[cat];
                document.getElementById('mockupItemSelect').value = items[Math.floor(Math.random() * items.length)];
                
                const setRandom = (id, arr) => { document.getElementById(id).value = Math.random() > 0.2 ? arr[Math.floor(Math.random() * arr.length)] : ""; };
                
                setRandom('mockupEnvSelect', mockupEnvironments);
                setRandom('mockupLightingSelect', lighting);
            } else {
                // Product Randomization
                const setRandom = (id, arr) => { document.getElementById(id).value = Math.random() > 0.2 ? arr[Math.floor(Math.random() * arr.length)] : ""; };
                setRandom('prodContextSelect', productContexts);
                setRandom('prodLightingSelect', productLighting);
                setRandom('prodAngleSelect', productAngles);
                setRandom('prodMaterialSelect', productMaterials);
            }

            generatePrompt();
        }

        function clearAll(doGeneratePrompt = true) {
            document.getElementById('negativePrompt').value = '';

            ['mockupEnvSelect', 'mockupLightingSelect'].forEach(id => {
                 const el = document.getElementById(id);
                 if(el) el.value = '';
             });
        
            ['productInput', 'prodContextSelect', 'prodLightingSelect', 'prodAngleSelect', 'prodMaterialSelect'].forEach(id => {
                 const el = document.getElementById(id);
                 if(el) el.value = '';
             });

            // Reset ratio button to default
            document.querySelectorAll('.ratio-btn').forEach(b => {
                b.classList.remove('bg-[#e81e29]', 'text-white', 'border-[#e81e29]');
                b.classList.add('bg-white/5', 'text-slate-300', 'border-white/10');
            });
            const defaultRatioBtn = document.querySelector('.ratio-btn[data-ratio=""]');
            if(defaultRatioBtn) {
                defaultRatioBtn.classList.add('bg-[#e81e29]', 'text-white', 'border-[#e81e29]');
                defaultRatioBtn.classList.remove('bg-white/5', 'text-slate-300', 'border-white/10');
            }
            
            document.getElementById('prodWeightSlider').value = 2;
            document.getElementById('prodWeightValue').textContent = '2.0';

            currentRatio = "";

            if (doGeneratePrompt) generatePrompt();
        }
    
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.remove('translate-x-[120%]');
            setTimeout(() => {
                toast.classList.add('translate-x-[120%]');
            }, 2000);
        }
    
        function copyToClipboard() {
            const copyText = document.getElementById("finalPrompt");
            if (!copyText.value) return;
            
            navigator.clipboard.writeText(copyText.value).then(() => {
                showToast('Copied to clipboard!');
                const btn = document.getElementById('copyBtn');
                const originalText = btn.textContent;
                btn.textContent = "Copied!";
                btn.classList.add('bg-[#e81e29]', 'border-[#e81e29]', 'shadow-[0_0_20px_rgba(232,30,41,0.5)]');
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.classList.remove('bg-[#e81e29]', 'border-[#e81e29]', 'shadow-[0_0_20px_rgba(232,30,41,0.5)]');
                }, 1500);
            });
        }

        document.addEventListener('DOMContentLoaded', init);

    </script>
<script src="https://cdn.tailwindcss.com"></script>
</body>


</html>